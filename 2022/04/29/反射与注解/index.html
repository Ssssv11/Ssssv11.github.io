<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-jbS6cVmQ2r">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=JetBrains+Mono:300,300italic,400,400italic,700,700italic%7CetBrains+Mono:300,300italic,400,400italic,700,700italic%7CFira+Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ssssv11.github.io","root":"/","images":"/images","scheme":"Pisces","version":"8.2.2","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"manual"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="JavaSE 反射与注解">
<meta property="og:type" content="article">
<meta property="og:title" content="反射与注解">
<meta property="og:url" content="https://ssssv11.github.io/2022/04/29/%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E8%A7%A3/index.html">
<meta property="og:site_name" content="Ssssv">
<meta property="og:description" content="JavaSE 反射与注解">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-29T13:38:48.093Z">
<meta property="article:modified_time" content="2022-04-29T13:38:51.944Z">
<meta property="article:author" content="Ssssv11">
<meta property="article:tag" content="JavaSE">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://ssssv11.github.io/2022/04/29/%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E8%A7%A3/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>反射与注解 | Ssssv</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Ssssv</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">25</span></a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">42</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B1%BB%E5%AF%B9%E8%B1%A1%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">类对象概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.</span> <span class="nav-text">获取类对象</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">3.</span> <span class="nav-text">反射常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.</span> <span class="nav-text">反射常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E7%9A%84%E5%90%8D%E5%AD%97%E3%80%81%E5%8C%85%E5%90%8D%E3%80%81%E7%88%B6%E7%B1%BB%E3%80%81%E6%8E%A5%E5%8F%A3"><span class="nav-number">3.1.1.</span> <span class="nav-text">使用反射获取类的名字、包名、父类、接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%B9%B6%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.1.2.</span> <span class="nav-text">使用反射获取类的构造方法并创建对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%E5%B9%B6%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.3.</span> <span class="nav-text">使用反射获取类中的方法并调用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#getMethods%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.3.1.</span> <span class="nav-text">getMethods方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getDeclaredMethods%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.3.2.</span> <span class="nav-text">getDeclaredMethods方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getMethod%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.3.3.</span> <span class="nav-text">getMethod方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E8%B0%83%E7%94%A8%E4%BB%BB%E4%BD%95%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95%E7%9A%84%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.3.4.</span> <span class="nav-text">使用反射实现一个可以调用任何对象方法的通用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">3.1.3.5.</span> <span class="nav-text">使用反射获取类中的属性</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.1.</span> <span class="nav-text">工厂设计模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.2.</span> <span class="nav-text">单例设计模式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE"><span class="nav-number">5.</span> <span class="nav-text">枚举</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">5.1.</span> <span class="nav-text">枚举的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="nav-number">5.2.</span> <span class="nav-text">枚举的本质</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E4%B8%8Eswitch%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8"><span class="nav-number">5.3.</span> <span class="nav-text">枚举与switch配合使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3"><span class="nav-number">6.</span> <span class="nav-text">注解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">6.1.</span> <span class="nav-text">注解的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E5%B1%9E%E6%80%A7%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.2.</span> <span class="nav-text">注解属性类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="nav-number">6.3.</span> <span class="nav-text">注解的本质</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E6%B3%A8%E8%A7%A3%E4%BF%A1%E6%81%AF"><span class="nav-number">6.4.</span> <span class="nav-text">使用反射获取注解信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%83%E6%B3%A8%E8%A7%A3"><span class="nav-number">6.5.</span> <span class="nav-text">元注解</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ssssv11"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">Ssssv11</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1Nzc3N2MTE=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Ssssv11"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://ssssv11.github.io/2022/04/29/%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Ssssv11">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ssssv">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          反射与注解
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-04-29 21:38:48 / Modified: 21:38:51" itemprop="dateCreated datePublished" datetime="2022-04-29T21:38:48+08:00">2022-04-29</time>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <center>JavaSE 反射与注解</center>

<span id="more"></span>

<h1 id="类对象概述"><a href="#类对象概述" class="headerlink" title="类对象概述"></a><strong>类对象概述</strong></h1><hr>
<ul>
<li><p>类的对象：基于某个类 new创建出来的对象，也称实例对象。</p>
</li>
<li><p><strong>类对象</strong>：<strong>类加载的产物</strong>，<strong>封装了一个类的所有信息</strong>（类名、父类、接口、属性、方法、构造方法）。</p>
<p>每个类加载到内存后都对应一个Class对象，每个类有且仅有一个Class对象，该对象内就包含了一个类的所有信息。</p>
</li>
<li><p>在程序运行的时候可以通过一个JVM参数来<strong>显示类的加载过程</strong>：<code>-verbose:class</code>。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoadClass</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        person.name = <span class="string">&quot;A&quot;</span>;</span><br><span class="line">        person.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在IDEA中，在<code>main()</code>方法中右键<code>More Run/Debug</code>选择<code>Modify Run Configuration</code>，然后在<code>Modify options</code>中勾选<code>Add VM options</code>，在<code>VM options</code>中填入<code>-verbose:class</code>。最后运行程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Opened F:\jdk\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.Object from F:\jdk\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.io.Serializable from F:\jdk\jre\lib\rt.jar]</span><br><span class="line">...</span><br><span class="line">[Loaded reflectionAndAnnotation.classObject.Person from file:/F:/Study/JavaSE/out/production/Java/]</span><br><span class="line">[Loaded java.util.Properties$LineReader from F:\jdk\jre\lib\rt.jar]</span><br><span class="line">A is eating</span><br><span class="line">[Loaded java.lang.Shutdown from F:\jdk\jre\lib\rt.jar]</span><br><span class="line">[Loaded java.lang.Shutdown$Lock from F:\jdk\jre\lib\rt.jar]</span><br></pre></td></tr></table></figure>

<p>控制台显示了程序运行时类的加载过程。</p>
<br/>

<h1 id="获取类对象"><a href="#获取类对象" class="headerlink" title="获取类对象"></a><strong>获取类对象</strong></h1><hr>
<ol>
<li><strong>通过类的对象获取类对象</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">Class&lt;?&gt; class1 = person.getClass();</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>通过类名获取类对象</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; class2 = Person.class;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>通过静态方法获取类对象</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;reflectionAndAnnotation.classObject.Person&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoadClass</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        getClassMethods();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getClassMethods</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">// 通过类的对象获取类对象</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        Class&lt;?&gt; class1 = person.getClass();</span><br><span class="line">        System.out.println(class1.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 通过类名获取类对象</span></span><br><span class="line">        Class&lt;?&gt; class2 = Person.class;</span><br><span class="line">        System.out.println(class2.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 通过静态方法获取类对象</span></span><br><span class="line">        Class&lt;?&gt; class3 = Class.forName(<span class="string">&quot;reflectionAndAnnotation.classObject.Person&quot;</span>);</span><br><span class="line">        System.out.println(class3.hashCode());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">460141958</span></span><br><span class="line"><span class="number">460141958</span></span><br><span class="line"><span class="number">460141958</span></span><br></pre></td></tr></table></figure>

<p>因为每个类加载到内存中只对应一个类对象，所以这输出的三个hashcode是相同的。</p>
<p>在获取类对象时推荐使用第三种方式，前两种看上去很简单但是代码的依赖性太强，假如编译的时候没有Person这个类就会报错 ，而第三种的参数是一个字符串，编译的时候可以没有Person类，只要运行的时候有就行。</p>
<br/>

<h1 id="反射常用操作"><a href="#反射常用操作" class="headerlink" title="反射常用操作"></a><strong>反射常用操作</strong></h1><hr>
<h2 id="反射常用方法"><a href="#反射常用方法" class="headerlink" title="反射常用方法"></a><strong>反射常用方法</strong></h2><ul>
<li><p><code>public String getName()</code></p>
<p>获取类对象所代表的类的名字。</p>
</li>
<li><p><code>public Package getPackage()</code></p>
<p>获取类对象所代表的包的名字。</p>
</li>
<li><p><code>public Class&lt;? super T&gt; getSuperclass()</code></p>
<p>获取类对象所代表的类的父类。</p>
</li>
<li><p><code>public Class&lt;?&gt;[] getInterfaces()</code></p>
<p>获取类对象所代表的类或接口实现的接口。</p>
</li>
<li><p><code>public Constructors&lt;?&gt;[] getConstructors()</code></p>
<p>获取类对象所代表的类的所有公共构造方法。</p>
</li>
<li><p><code>public T newInstance()</code></p>
<p>创建类对象所代表的类一个新实例。</p>
</li>
<li><p><code>public Method[] getMethods()</code></p>
<p>获取类对象所代表的类或接口的公共成员方法。</p>
</li>
<li><p><code>public Field[] getFields()</code></p>
<p>获取类对象所代表的类或接口的公共访问字段。</p>
</li>
</ul>
<br/>

<h3 id="使用反射获取类的名字、包名、父类、接口"><a href="#使用反射获取类的名字、包名、父类、接口" class="headerlink" title="使用反射获取类的名字、包名、父类、接口"></a><strong>使用反射获取类的名字、包名、父类、接口</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reflectionOpe1</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class&lt;?&gt; class1 = Class.forName(<span class="string">&quot;reflectionAndAnnotation.reflectionOpe.Person&quot;</span>);</span><br><span class="line">    <span class="comment">//1.获取类的名字</span></span><br><span class="line">    System.out.println(class1.getName());</span><br><span class="line">    <span class="comment">//2.获取包的名字</span></span><br><span class="line">    System.out.println(class1.getPackage());</span><br><span class="line">    <span class="comment">//3.获取类的父类</span></span><br><span class="line">    System.out.println(class1.getSuperclass());</span><br><span class="line">    <span class="comment">//4.获取类的接口</span></span><br><span class="line">    System.out.println(Arrays.toString(class1.getInterfaces()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出类实现的接口时返回的是一个数组，如果该对象表示了一个<strong>不实现</strong>任何接口的类，则返回一个<strong>数组长度为0</strong>的数组。运行结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">reflectionAndAnnotation.reflectionOpe.Person</span><br><span class="line"><span class="keyword">package</span> reflectionAndAnnotation.reflectionOpe</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">java</span>.lang.Object</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="使用反射获取类的构造方法并创建对象"><a href="#使用反射获取类的构造方法并创建对象" class="headerlink" title="使用反射获取类的构造方法并创建对象"></a><strong>使用反射获取类的构造方法并创建对象</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reflectionOpe2</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 获取类的类对象</span></span><br><span class="line">    Class&lt;?&gt; class2 = Class.forName(<span class="string">&quot;reflectionAndAnnotation.reflectionOpe.Person&quot;</span>);</span><br><span class="line">    <span class="comment">// 获取类的所有构造方法</span></span><br><span class="line">    Constructor&lt;?&gt;[] constructor = class2.getConstructors();</span><br><span class="line">    <span class="comment">// 遍历</span></span><br><span class="line">    <span class="keyword">for</span> (Constructor&lt;?&gt; constructor1 : constructor) &#123;</span><br><span class="line">        System.out.println(constructor1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取类的无参构造方法</span></span><br><span class="line">    Constructor&lt;?&gt; con1 = class2.getConstructor();</span><br><span class="line">    <span class="comment">// 创建对象</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">A</span> <span class="operator">=</span> con1.newInstance();</span><br><span class="line">    System.out.println(A);</span><br><span class="line">    <span class="comment">// 简便方法  类对象.newInstance()</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">B</span> <span class="operator">=</span> class2.newInstance();</span><br><span class="line">    System.out.println(B);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取类的带参构造方法</span></span><br><span class="line">    Constructor&lt;?&gt; con2 = class2.getConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">C</span> <span class="operator">=</span> (Person)con2.newInstance(<span class="string">&quot;C&quot;</span>, <span class="number">22</span>);</span><br><span class="line">    System.out.println(C);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用类对象的带参构造方法创建实例时需要传递相应的参数<code>class2.getConstructor(String.class, int.class)</code>.</p>
<p>运行结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> reflectionAndAnnotation.reflectionOpe.Person()</span><br><span class="line"><span class="keyword">public</span> reflectionAndAnnotation.reflectionOpe.Person(java.lang.String,<span class="type">int</span>)</span><br><span class="line">无参构造方法执行</span><br><span class="line">Person&#123;name=<span class="string">&#x27;null&#x27;</span>, age=<span class="number">0</span>&#125;</span><br><span class="line">无参构造方法执行</span><br><span class="line">Person&#123;name=<span class="string">&#x27;null&#x27;</span>, age=<span class="number">0</span>&#125;</span><br><span class="line">带参构造方法执行</span><br><span class="line">Person&#123;name=<span class="string">&#x27;C&#x27;</span>, age=<span class="number">22</span>&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="使用反射获取类中的方法并调用方法"><a href="#使用反射获取类中的方法并调用方法" class="headerlink" title="使用反射获取类中的方法并调用方法"></a><strong>使用反射获取类中的方法并调用方法</strong></h3><p>在Person类中添加方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(name + <span class="string">&quot; is eating&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> + <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">(String food)</span>&#123;</span><br><span class="line">    System.out.println(name + <span class="string">&quot; is eating &quot;</span> + food);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">privateMethod</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;This is a private method&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">staticMethod</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;This is a static method&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>reflectionOpe3方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取类对象</span></span><br><span class="line">Class&lt;?&gt; class3 = Class.forName(<span class="string">&quot;reflectionAndAnnotation.reflectionOpe.Person&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="getMethods方法"><a href="#getMethods方法" class="headerlink" title="getMethods方法"></a><strong>getMethods方法</strong></h4><ul>
<li><p><code>Method[] getMethods()</code></p>
<p>获取类的所有<strong>公有</strong>方法，包括从父类继承的方法，返回一个Method数组。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;\ngetMethods: &quot;</span>);</span><br><span class="line">Method[] methods1 = class3.getMethods();</span><br><span class="line"><span class="comment">// 遍历</span></span><br><span class="line"><span class="keyword">for</span> (Method method : methods1) &#123;</span><br><span class="line">    System.out.println(method);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">getMethods: </span><br><span class="line"><span class="keyword">public</span> java.lang.String reflectionAndAnnotation.reflectionOpe.Person.toString()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.eat()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.eat(java.lang.String)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.staticMethod()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> java.lang.Object.wait(<span class="type">long</span>,<span class="type">int</span>) <span class="keyword">throws</span> java.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.wait(<span class="type">long</span>) <span class="keyword">throws</span> java.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> java.lang.Object.wait() <span class="keyword">throws</span> java.lang.InterruptedException</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> java.lang.Object.equals(java.lang.Object)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">native</span> <span class="type">int</span> java.lang.Object.hashCode()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> java.lang.Class java.lang.Object.getClass()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.notify()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> java.lang.Object.notifyAll()</span><br></pre></td></tr></table></figure>

<p>该方法返回的Method数组中不仅包含Person类的方法，也包含了继承自Object类的方法，但不包含该类中与继承的父类中的非公有方法。因此，该方法获取了<strong>类中和继承自父类的公开方法</strong>。</p>
<h4 id="getDeclaredMethods方法"><a href="#getDeclaredMethods方法" class="headerlink" title="getDeclaredMethods方法"></a><strong>getDeclaredMethods方法</strong></h4><ul>
<li><p><code>Method[] getDeclaredMethods()</code></p>
<p>获取类的所有<strong>已声明</strong>的方法，返回一个Method数组。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;\ngetDeclaredMethods: &quot;</span>);</span><br><span class="line">Method[] methods2 = class3.getDeclaredMethods();</span><br><span class="line"><span class="keyword">for</span> (Method method : methods2) &#123;</span><br><span class="line">    System.out.println(method);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getDeclaredMethods: </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.staticMethod()</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.privateMethod()</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.eat(java.lang.String)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.eat()</span><br><span class="line"><span class="keyword">public</span> java.lang.String reflectionAndAnnotation.reflectionOpe.Person.toString()</span><br></pre></td></tr></table></figure>

<p>该方法返回的Method数组中包含Person类中声明的所有方法，包括公有的、私有的、受保护的和默认的方法。</p>
<h4 id="getMethod方法"><a href="#getMethod方法" class="headerlink" title="getMethod方法"></a><strong>getMethod方法</strong></h4><ul>
<li><p><code>Method getMethod(String name, Class&lt;?&gt;... parameterTypes)</code></p>
<p>获取单个方法，返回一个Method对象。</p>
<p>需要参数：方法名<code>String name</code>、方法的参数类型<code>Class&lt;?&gt;...parameterTypes</code>（若有）</p>
</li>
<li><p><code>invoke(Object obj, Object... args)</code></p>
<p>调用获取的方法</p>
<p>需要参数：调用方法的对象<code>Object obj</code>、调用的方法的参数<code>Object... args</code>（若有）</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取单个方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;\ngetMethod: &quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method1</span> <span class="operator">=</span> class3.getMethod(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line">System.out.println(method1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="comment">// 无参无返回值</span></span><br><span class="line">System.out.println(<span class="string">&quot;\ninvoke eat() :&quot;</span>);</span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person)class3.newInstance();   <span class="comment">// 创建对象</span></span><br><span class="line">method1.invoke(person);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参有返回值</span></span><br><span class="line">System.out.println(<span class="string">&quot;\ninvoke toString() :&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method2</span> <span class="operator">=</span> class3.getMethod(<span class="string">&quot;toString&quot;</span>);</span><br><span class="line">System.out.println(method2.invoke(person));</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">getMethod: </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> reflectionAndAnnotation.reflectionOpe.Person.eat()</span><br><span class="line"></span><br><span class="line">invoke <span class="title function_">eat</span><span class="params">()</span> :</span><br><span class="line">无参构造方法执行</span><br><span class="line"><span class="literal">null</span> is eating</span><br><span class="line"></span><br><span class="line">invoke <span class="title function_">toString</span><span class="params">()</span> :</span><br><span class="line">Person&#123;name=<span class="string">&#x27;null&#x27;</span>, age=<span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有参无返回值</span></span><br><span class="line">System.out.println(<span class="string">&quot;\ninvoke eat(String food) :&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method3</span> <span class="operator">=</span> class3.getMethod(<span class="string">&quot;eat&quot;</span>, String.class);</span><br><span class="line">method3.invoke(person, <span class="string">&quot;Apple&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">invoke <span class="title function_">eat</span><span class="params">(String food)</span> :</span><br><span class="line"><span class="literal">null</span> is eating Apple</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 私有方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;\ninvoke privateMethod() :&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method4</span> <span class="operator">=</span> class3.getDeclaredMethod(<span class="string">&quot;privateMethod&quot;</span>);</span><br><span class="line"><span class="comment">// 设置访问权限</span></span><br><span class="line">method4.setAccessible(<span class="literal">true</span>);</span><br><span class="line">method4.invoke(person);</span><br></pre></td></tr></table></figure>

<p>获取私有方法时需要使用<code>getDeclaredMethod</code>，并且需要设置访问权限无效才能调用，不然私有方法是不允许在其他类中调用的。</p>
<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">invoke <span class="title function_">privateMethod</span><span class="params">()</span> :</span><br><span class="line">This is a <span class="keyword">private</span> method</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 静态方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;\ninvoke staticMethod() :&quot;</span>);</span><br><span class="line"><span class="type">Method</span> <span class="variable">method5</span> <span class="operator">=</span> class3.getMethod(<span class="string">&quot;staticMethod&quot;</span>);</span><br><span class="line"><span class="comment">// 调用静态方法不需要创建对象</span></span><br><span class="line">method5.invoke(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>调用静态方法时不需要创建对象，因此<code>invoke()</code>方法中调用方法的对象这个参数为<code>null</code>。</p>
<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">invoke <span class="title function_">staticMethod</span><span class="params">()</span> :</span><br><span class="line">This is a <span class="keyword">static</span> method</span><br></pre></td></tr></table></figure>

<h4 id="使用反射实现一个可以调用任何对象方法的通用方法"><a href="#使用反射实现一个可以调用任何对象方法的通用方法" class="headerlink" title="使用反射实现一个可以调用任何对象方法的通用方法"></a><strong>使用反射实现一个可以调用任何对象方法的通用方法</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用反射实现一个可以调用任何对象方法的通用方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> o 要调用的对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> methodName 要调用的对象的方法的名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> types 要调用的对象的方法的参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args 要调用的对象的方法的参数的值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 调用的方法的返回值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">reflectionOpe4</span><span class="params">(Object o, String methodName, Class&lt;?&gt;[] types, Object... args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// 获取类对象</span></span><br><span class="line">    Class&lt;?&gt; class1 = o.getClass();</span><br><span class="line">    <span class="comment">// 获取方法</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> class1.getMethod(methodName, types);</span><br><span class="line">    <span class="comment">// 调用方法</span></span><br><span class="line">    <span class="keyword">return</span> method.invoke(o, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以使用该方法来调用任何对象的公开方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">	<span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">	<span class="comment">//properties.setProperty(&quot;name&quot;, &quot;A&quot;);</span></span><br><span class="line">	reflectionOpe4(properties, <span class="string">&quot;setProperty&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class, String.class&#125;, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;A&quot;</span>);</span><br><span class="line">	System.out.println(properties);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;name=A&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用反射获取类中的属性"><a href="#使用反射获取类中的属性" class="headerlink" title="使用反射获取类中的属性"></a><strong>使用反射获取类中的属性</strong></h4><p>首先在<code>Person</code>类中添加一个私有属性<code>private String adress</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取类对象</span></span><br><span class="line">Class&lt;?&gt; class5 = Class.forName(<span class="string">&quot;reflectionAndAnnotation.reflectionOpe.Person&quot;</span>);</span><br><span class="line"><span class="comment">// 获取类中所有的公有属性, 包括从父类继承的属性, 不包括私有的、受保护的属性</span></span><br><span class="line">Field[] fields1 = class5.getFields();</span><br><span class="line">System.out.println(fields1.length);</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>运行之后控制台打印的结果是“0”，因为<code>getFields()</code>获取的是公开的和从父类继承的字段，而Person类中的字段（属性）是私有的，想要获取这些属性需要用<code>getDeclaredFields()</code>方法，该方法返回类声明的所有属性，包括私有、默认、受保护的属性，但不包括继承的。</p>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取类中所有已声明的属性, 包括私有的、受保护的属性，不包括从父类继承的属性</span></span><br><span class="line">Field[] fields2 = class5.getDeclaredFields();</span><br><span class="line"><span class="keyword">for</span> (Field field : fields2) &#123;</span><br><span class="line">    System.out.println(field);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.String reflectionAndAnnotation.reflectionOpe.Person.name</span><br><span class="line"><span class="type">int</span> reflectionAndAnnotation.reflectionOpe.Person.age</span><br><span class="line"><span class="keyword">private</span> java.lang.String reflectionAndAnnotation.reflectionOpe.Person.address</span><br></pre></td></tr></table></figure>

<hr>
<p>读写属性分别使用<code>get()</code>方法和<code>set()</code>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取单个属性</span></span><br><span class="line"><span class="comment">// 获取name属性</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">fields3</span> <span class="operator">=</span> class5.getDeclaredField(<span class="string">&quot;adress&quot;</span>);</span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person)class5.newInstance();   <span class="comment">// 创建对象</span></span><br><span class="line">fields3.set(person, <span class="string">&quot;Beijing&quot;</span>);</span><br><span class="line"><span class="comment">// 获取值</span></span><br><span class="line">System.out.println(fields3.get(person));</span><br></pre></td></tr></table></figure>

<p>输出报错<code>java.lang.IllegalAccessException</code>。因为name属性是私有成员，不允许修改。就像之前调用私有方法一样，在修改属性之前需要设置访问权限：<code>fields3.setAccessible(true);</code></p>
<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">无参构造方法执行</span><br><span class="line">Beijing</span><br></pre></td></tr></table></figure>

<br/>

<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a><strong>设计模式</strong></h1><hr>
<ul>
<li><p><strong>什么是设计模式</strong></p>
<p>一套被反复使用、多数人知晓的、经过分类编目、代码设计经验的总结。即<strong>特定问题的固定解决方法</strong>。</p>
</li>
<li><p><strong>好处</strong></p>
<p>使用设计模式是为了可重用代码，让代码更容易被他人理解，保证代码可靠性、重用性。</p>
</li>
<li><p>在Gof的《设计模式》书中描述了23中设计模式。本文只介绍几种常见的。</p>
</li>
</ul>
<h2 id="工厂设计模式"><a href="#工厂设计模式" class="headerlink" title="工厂设计模式"></a><strong>工厂设计模式</strong></h2><ul>
<li>工厂模式主要负责<strong>对象创建</strong>的问题。</li>
<li>开发中有一个非常重要的原则“<strong>开闭原则</strong>”：对拓展开放、对修改关闭。</li>
<li>可通过反射进行工厂模式的设计，完成动态的对象创建。</li>
</ul>
<p>工厂模式一般有父类产品、子类产品、工厂和客户。以下演示工厂模式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    父类产品</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Usb</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">Service</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    子类产品</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">implements</span> <span class="title class_">Usb</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Service</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Mouse is working&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    子类产品</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fan</span> <span class="keyword">implements</span> <span class="title class_">Usb</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Service</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Fan is working&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    子类产品</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HardDisk</span> <span class="keyword">implements</span> <span class="title class_">Usb</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Service</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HardDisk is working&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    工厂类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsbFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Usb <span class="title function_">createUsb</span><span class="params">(<span class="type">int</span> type)</span>&#123;</span><br><span class="line">        <span class="type">Usb</span> <span class="variable">usb</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(type == <span class="number">1</span>)&#123;  <span class="comment">// mouse</span></span><br><span class="line">            usb = <span class="keyword">new</span> <span class="title class_">Mouse</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(type == <span class="number">2</span>)&#123; <span class="comment">//fan</span></span><br><span class="line">            usb = <span class="keyword">new</span> <span class="title class_">Fan</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(type == <span class="number">3</span>)&#123; <span class="comment">// hardDisk</span></span><br><span class="line">            usb = <span class="keyword">new</span> <span class="title class_">HardDisk</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> usb;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    客户程序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Please choose:\n1.Mouse   2.Fan   3.HardDisk&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">choice</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="type">Usb</span> <span class="variable">usb</span> <span class="operator">=</span> UsbFactory.createUsb(choice);</span><br><span class="line">        <span class="keyword">if</span>(usb != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Activated&quot;</span>);</span><br><span class="line">            usb.Service();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Activate error&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Please choose:</span><br><span class="line"><span class="number">1.</span>Mouse   <span class="number">2.</span>Fan   <span class="number">3.</span>HardDisk</span><br><span class="line"><span class="number">2</span></span><br><span class="line">Activated</span><br><span class="line">Fan is working</span><br></pre></td></tr></table></figure>

<p>如果新增了一个产品如键盘，那么需要新建一个子类产品类，然后在工厂类的<code>if-else</code>语句中加一个type。这样做就破坏了“开闭原则”，修改了源代码。接下来使用反射来优化这个程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    工厂类(使用反射)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsbFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Usb <span class="title function_">createUsb</span><span class="params">(String type)</span> &#123;   <span class="comment">// type表示类型的全名称(带包名)</span></span><br><span class="line">        <span class="type">Usb</span> <span class="variable">usb</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        Class&lt;?&gt; class1 = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            class1 = Class.forName(type);</span><br><span class="line">            usb = (Usb) class1.newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> usb;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在工厂类利用反射创建新实例，传递过来的就需要一个完整的“包名.类名”。</p>
<p>但是客户还是输入数字来选择购买哪个产品，我们可以用Properties类来将<strong>客户的选择</strong>和“<strong>包名.类名</strong>”存储为键值对，并将它放在单独的配置文件中：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span>=<span class="string">reflectionAndAnnotation.designPattern.factoryPattern.Mouse</span></span><br><span class="line"><span class="attr">2</span>=<span class="string">reflectionAndAnnotation.designPattern.factoryPattern.Fan</span></span><br><span class="line"><span class="attr">3</span>=<span class="string">reflectionAndAnnotation.designPattern.factoryPattern.HardDisk</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    客户程序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Please choose:\n1.Mouse   2.Fan   3.HardDisk&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">String</span> <span class="variable">choice</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">        </span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;src\\reflectionAndAnnotation\\designPattern\\factoryPattern\\usb.properties&quot;</span>);</span><br><span class="line">        properties.load(fis);</span><br><span class="line">        fis.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">Usb</span> <span class="variable">usb</span> <span class="operator">=</span> UsbFactory.createUsb(properties.getProperty(choice));</span><br><span class="line">        <span class="keyword">if</span>(usb != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Activated&quot;</span>);</span><br><span class="line">            usb.Service();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Activate error&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行代码，程序正常运行。这时候新加一个产品，我们只需要在<code>Usb.properties</code>文件中新加一行代码：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">4</span>=<span class="string">reflectionAndAnnotation.designPattern.factoryPattern.KeyBoard</span></span><br></pre></td></tr></table></figure>

<p>不用去修改源代码，只需要再新添加一个<code>KeyBoard</code>类，然后执行代码，运行结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Please choose:</span><br><span class="line"><span class="number">1.</span>Mouse   <span class="number">2.</span>Fan   <span class="number">3.</span>HardDisk</span><br><span class="line"><span class="number">4</span></span><br><span class="line">Activated</span><br><span class="line">KeyBoard is working</span><br></pre></td></tr></table></figure>

<p>输入4，正常输出结果，符合了“开闭原则”。</p>
<br/>

<h2 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a><strong>单例设计模式</strong></h2><p>这种模式涉及一个单一的类，它负责创建一个对象，同时确保只创建一个对象。该类提供了一种访问其唯一对象的方法，该对象可以直接访问而无需实例化该类的对象。</p>
<ul>
<li><p>单例（Singleton）：只允许创建一个该类的对象。</p>
<p>要保证整个系统在运行过程中只能创建对象，有两种方式：</p>
</li>
</ul>
<p><strong>方式1</strong>：<strong>饿汉式</strong>（<strong>类加载时创建</strong>，<strong>天生线程安全</strong>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    饿汉式单例模式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EagerLoading</span> &#123;</span><br><span class="line">    <span class="comment">// 创建常量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">EagerLoading</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EagerLoading</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有化构造方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">EagerLoading</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过静态公开方法返回对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> EagerLoading <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建饿汉式单例的三个步骤：</p>
<ol>
<li>创建一个该类的常量对象</li>
<li>私有化构造方法，类外部不能创建该对象</li>
<li>通过静态公开方法返回对象</li>
</ol>
<p>通过一个多线程的代码来测试其是否是线程安全的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingletonTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; System.out.println(EagerLoading.getInstance().hashCode())).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下，三个对象的hashcode一样，说明三个线程获取的是同一个对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">722702912</span></span><br><span class="line"><span class="number">722702912</span></span><br><span class="line"><span class="number">722702912</span></span><br></pre></td></tr></table></figure>

<p><strong>方式2</strong>：<strong>懒汉式</strong>（<strong>使用时创建</strong>，<strong>线程不安全</strong>，<strong>需要加同步</strong>）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    懒汉式单例模式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazyLoading</span> &#123;</span><br><span class="line">    <span class="comment">// 创建对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">LazyLoading</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有化构造方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazyLoading</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过静态公开方法返回对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazyLoading <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LazyLoading</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建懒汉式单例的三个步骤：</p>
<ol>
<li>创造一个对象，赋值为null</li>
<li>私有化构造方法，类外部不能创建该对象</li>
<li>通过静态公开方法返回对象</li>
</ol>
<p>通过一个多线程的代码来测试其是否是线程安全的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingletonTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; System.out.println(LazyLoading.getInstance().hashCode())).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1076755763</span></span><br><span class="line"><span class="number">1588147852</span></span><br><span class="line"><span class="number">1588147852</span></span><br></pre></td></tr></table></figure>

<p>hashcode不一样，说明在多线程中创建了不同的对象。由于懒汉式单例<strong>线程不安全</strong>，因此需要使用同步来保证线程互斥访问来解决这个问题。可以使用<strong>同步方法</strong>或<strong>同步代码块</strong>。</p>
<ul>
<li>同步方法：在<code>getInstance</code>方法的返回值类型前加上<code>synchronized</code>关键字</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> LazyLoading <span class="title function_">getInstance</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>同步代码块：将需要同步的代码<code>if语句</code>放入同步代码块中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(LazyLoading.class) &#123;</span><br><span class="line">	<span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">		instance = <span class="keyword">new</span> <span class="title class_">LazyLoading</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li>锁不能是<code>instance</code>，因为前面赋值是null，会出现空指针异常</li>
<li>可以使用该类的类对象作为锁，因为一个类的类对象是唯一的</li>
</ul>
<p>但这样写的同步代码块效率低。在线程比较多的情况下每个线程在该方法时，每个线程需要判断是否上锁。但其实当有一个线程进入到同步代码块中就已经创建了实例，之后的其他线程执行的就只是返回语句而不需要进入同步代码块中。所以可以让后来的线程绕过同步代码块：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(LazyLoading.class) &#123;</span><br><span class="line">		<span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">			instance = <span class="keyword">new</span> <span class="title class_">LazyLoading</span>();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br></pre></td></tr></table></figure>

<p>在同步代码块中再加一个判断是否已被实例化的语句，就可以让之后的线程直接执行下面的返回语句，而不必再去判断是否上锁。这样可以优化执行效率。</p>
<p><strong>两种单例模式的优缺点</strong>：</p>
<p>饿汉式：</p>
<ul>
<li>优点：线程安全，类一加载就创建了实例。</li>
<li>缺点：不使用实例对象也会存在于内存中，生命周期长，浪费空间。</li>
</ul>
<p>懒汉式：</p>
<ul>
<li>优点：只有在调用<code>getInstance()</code>才会实例化，生命周期短，节省空间</li>
<li>缺点：线程不安全。可以使用同步来保证线程互斥访问。</li>
</ul>
<p>考虑两种方式的优点，还有第三种方式来实现单例模式：</p>
<p><strong>静态内部类懒汉式（使用时创建，线程安全）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    懒汉式静态内部类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticInnerClassLazyLoading</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">StaticInnerClassLazyLoading</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Holder</span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="type">StaticInnerClassLazyLoading</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StaticInnerClassLazyLoading</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> StaticInnerClassLazyLoading <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Holder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在没有使用静态内部类里的内容时，这个静态内部类是不会执行的，只有当调用<code>getInstance()</code>时，才会执行内部类的实例化，而<code>instance</code>是使用<code>new</code>来实例化的，这种方式本身就是线程安全的。</p>
<p>通过一个多线程的代码来测试其是否是线程安全的，测试代码同上，结果如下，三个hashcode一样，说明多个线程获取了同一个对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">722702912</span></span><br><span class="line"><span class="number">722702912</span></span><br><span class="line"><span class="number">722702912</span></span><br></pre></td></tr></table></figure>

<br/>

<h1 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a><strong>枚举</strong></h1><hr>
<h2 id="枚举的概念"><a href="#枚举的概念" class="headerlink" title="枚举的概念"></a><strong>枚举的概念</strong></h2><ul>
<li><p>枚举是一个引用类型，枚举是一个规定了取值范围的数据类型。反映到现实生活中，比如性别就是男和女，一个星期就是从周一到周日等。</p>
</li>
<li><p>枚举变量不能使用其他的数据，只能使用枚举中常量赋值，提高程序安全性。</p>
</li>
<li><p>定义枚举使用<code>enum</code>关键字。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建枚举类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">	MALE, FMALE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>枚举类中<strong>必须包含枚举常量</strong>，如上段中的MALE，多个枚举常量之间使用逗号隔开，如果类中只有枚举常量末尾可以不加分号。</p>
<p>枚举类中还可以包含<strong>属性，方法，私有构造方法</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">	MALE, FMALE;	</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> a;</span><br><span class="line">	<span class="keyword">private</span> String bString;</span><br><span class="line">	<span class="keyword">static</span> HashMap&lt;Integer, String&gt; hashMap;</span><br><span class="line">    <span class="comment">//构造方法必须私有</span></span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">Gender</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>演示枚举类的使用，结果输出FMALE：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenderTest</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//构造方法私有，不能使用new来创建</span></span><br><span class="line">		<span class="type">Gender</span> <span class="variable">gender</span> <span class="operator">=</span> Gender.FMALE;</span><br><span class="line">		System.out.println(gender);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="枚举的本质"><a href="#枚举的本质" class="headerlink" title="枚举的本质"></a><strong>枚举的本质</strong></h2><p> 通过反编译工具来反编译我们的枚举类<code>Gender</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Gender</span> <span class="keyword">extends</span> <span class="title class_">Enum</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Gender MALE;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Gender FMALE;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Gender ENUM$VALUES[];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">Gender</span><span class="params">(String s, <span class="type">int</span> i)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">super</span>(s, i);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Gender[] values()</span><br><span class="line">	&#123;</span><br><span class="line">		Gender agender[];</span><br><span class="line">		<span class="type">int</span> i;</span><br><span class="line">		Gender agender1[];</span><br><span class="line">		System.arraycopy(agender = ENUM$VALUES, <span class="number">0</span>, agender1 = <span class="keyword">new</span> <span class="title class_">Gender</span>[i = agender.length], <span class="number">0</span>, i);</span><br><span class="line">		<span class="keyword">return</span> agender1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Gender <span class="title function_">valueOf</span><span class="params">(String s)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> (Gender)Enum.valueOf(io/gitee/lazydog036/meiJu/Gender, s);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">static</span> </span><br><span class="line">	&#123;</span><br><span class="line">		MALE = <span class="keyword">new</span> <span class="title class_">Gender</span>(<span class="string">&quot;MALE&quot;</span>, <span class="number">0</span>);</span><br><span class="line">		FMALE = <span class="keyword">new</span> <span class="title class_">Gender</span>(<span class="string">&quot;FMALE&quot;</span>, <span class="number">1</span>);</span><br><span class="line">		ENUM$VALUES = (<span class="keyword">new</span> <span class="title class_">Gender</span>[] &#123;</span><br><span class="line">			MALE, FMALE</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>Gender</code>类变成了<code>final</code>修饰的终止类，意味着这个类没有子类，而且它继承了<code>Enum</code>抽象类。实际上我们所创建的枚举类都隐式地继承了<code>Enum</code>类。而<code>FMALE</code>和<code>MALE</code>都变成了用该类所创建的静态的终止的属性，尽管我们只写了常量名。</p>
<p>还可以看到java编译时还添加了一个带参的私有构造方法和两个静态方法。还有一个静态代码块，在其中对这些静态常量进行了赋值。</p>
<p>所以枚举的本质就是：</p>
<ul>
<li>一个终止类，并继承Enum抽象类。</li>
<li>枚举常量是当前类型的静态常量。</li>
</ul>
<br/>

<h2 id="枚举与switch配合使用"><a href="#枚举与switch配合使用" class="headerlink" title="枚举与switch配合使用"></a><strong>枚举与switch配合使用</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    枚举配合switch使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchEnum</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Gender</span> <span class="variable">gender</span> <span class="operator">=</span> Gender.MALE;</span><br><span class="line">        <span class="keyword">switch</span>(gender)&#123;</span><br><span class="line">            <span class="keyword">case</span> MALE:</span><br><span class="line">                System.out.println(<span class="string">&quot;男性&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> FEMALE:</span><br><span class="line">                System.out.println(<span class="string">&quot;女性&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">男性</span><br></pre></td></tr></table></figure>

<br/>

<h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a><strong>注解</strong></h1><hr>
<h2 id="注解的概念"><a href="#注解的概念" class="headerlink" title="注解的概念"></a><strong>注解的概念</strong></h2><ul>
<li><p>注解（Annotation）是代码里的特殊标记，程序可以读取注解，一般用于替代配置文件。</p>
</li>
<li><p>开发人员可以通过注解告诉类如何运行。</p>
<p>在Java技术里注解的典型应用是：可以通过反射技术得到类里面的注解，以决定怎么去运行类。</p>
</li>
<li><p>常见注解：<code>@Override</code>表示重写父类方法，<code>@Deprecated</code>表示方法已过时。</p>
</li>
<li><p>定义注解使用<code>@interface</code>关键字，注解中只能包含属性。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    创建注解</span></span><br><span class="line"><span class="comment">    注解中只能包含属性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> CreateAnnotation &#123;</span><br><span class="line">    <span class="comment">// 属性后需要加(), 可以有默认值</span></span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注解类型的属性与其他类有所不同，它需要在属性名后面加一个括号，但不叫方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    注解的使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@CreateAnnotation(name = &quot;A&quot;, age = 20)</span> <span class="comment">// 不添加赋值则使用默认属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用注解时直接添加到方法上面，也可以添加到类上面；如果属性没有默认值的话，需要在注解名括号里赋值。</p>
<br/>

<h2 id="注解属性类型"><a href="#注解属性类型" class="headerlink" title="注解属性类型"></a><strong>注解属性类型</strong></h2><ul>
<li>String类型</li>
<li>基本数据类型</li>
<li>Class类型</li>
<li>枚举类型</li>
<li>注解类型</li>
<li>以上类型的一维数组</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AnnotationType &#123;</span><br><span class="line">    <span class="comment">// 字符串类型</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// 基本类型</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">num</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// Class类型</span></span><br><span class="line">    Class&lt;?&gt; class1();</span><br><span class="line">    <span class="comment">// 枚举类型</span></span><br><span class="line">    Gender <span class="title function_">gender</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// 注解类型</span></span><br><span class="line">    CreateAnnotation <span class="title function_">annotation</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// 一维数组类型</span></span><br><span class="line">    <span class="type">double</span>[] array();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="注解的本质"><a href="#注解的本质" class="headerlink" title="注解的本质"></a><strong>注解的本质</strong></h2><p>反编译<code>CreateAnnotation</code>类生成的.class文件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyAnnotation</span></span><br><span class="line">	<span class="keyword">extends</span> <span class="title class_">Annotation</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">nameString</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到注解类已经变成了一个接口，而在注解类中定义的两个属性也变成了两个抽象方法。</p>
<p>所以注解的本质其实就是<strong>接口</strong>，这个接口继承自<code>Annotation</code>类。</p>
<br/>

<h2 id="使用反射获取注解信息"><a href="#使用反射获取注解信息" class="headerlink" title="使用反射获取注解信息"></a><strong>使用反射获取注解信息</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    注解类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PersonInfo &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">sex</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Person类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 在方法上添加注解</span></span><br><span class="line">    <span class="meta">@PersonInfo(name = &quot;Ada&quot;, age = 20, sex = &quot;female&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String name, <span class="type">int</span> age, String sex)</span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot; &quot;</span> + age + <span class="string">&quot; &quot;</span> + sex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    使用反射获取注解</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetAnnotation</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 获取类对象</span></span><br><span class="line">        Class&lt;?&gt; class1 = Class.forName(<span class="string">&quot;reflectionAndAnnotation.annotation.getAnnotation.Person&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取方法</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method1</span> <span class="operator">=</span> class1.getMethod(<span class="string">&quot;show&quot;</span>, String.class, <span class="type">int</span>.class, String.class);</span><br><span class="line">        <span class="comment">// 获取注解</span></span><br><span class="line">        <span class="type">PersonInfo</span> <span class="variable">personInfo</span> <span class="operator">=</span> method1.getAnnotation(PersonInfo.class);</span><br><span class="line">        <span class="comment">// 打印注解信息</span></span><br><span class="line">        System.out.println(personInfo.name());</span><br><span class="line">        System.out.println(personInfo.age());</span><br><span class="line">        System.out.println(personInfo.sex());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们发现IDEA在<code>method1.getAnnotation(PersonInfo.class)</code>中提示我们<code>Annotation &#39;PersonInfo.class&#39; is not retained for reflective access </code>，意思是：注解PersonInfo没有为反射保留。</p>
<p>因此我们运行代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException</span><br><span class="line">    at reflectionAndAnnotation.annotation.getAnnotation.GetAnnotation.main(GetAnnotation.java:<span class="number">17</span>)</span><br></pre></td></tr></table></figure>

<p>出现了空指针异常。这个错误的原因就在于personInfo的值为null。虽然我们已经为注解赋值过了，但注解信息在运行的时候就没有了，<code>@PersonInfo</code>注解类的类名上有一个默认的<strong>元注解</strong><code>@RetentionPolicy.CLASS</code>，使它只作保留在编译后的class文件中。</p>
<br/>

<h2 id="元注解"><a href="#元注解" class="headerlink" title="元注解"></a><strong>元注解</strong></h2><p>元注解：用来描述注解的注解。</p>
<p><code>@Retention</code>：用于指定注解可以保留的域。</p>
<ul>
<li><code>@RetentionPolicy.CLASS</code>：注解记录在class文件中，运行Java程序时，JVM不会保留。这是注解的<strong>默认值</strong>。</li>
<li><code>@RetentionPolicy.RUNTIME</code>：注解记录在class文件中，运行Java程序中，JVM会保留注解，程序可以通过反射获取该注释。</li>
<li><code>@RetentionPolicy.SOURCE</code>：编译时直接丢弃这种策略的注释。</li>
</ul>
<p>要解决上一节的问题，就要改变注解保留的域：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PersonInfo &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">sex</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样我们就能顺利的输出注解信息了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ada</span><br><span class="line"><span class="number">20</span></span><br><span class="line">female</span><br></pre></td></tr></table></figure>

<p>我们也可以将注解里的属性值传入<code>show()</code>方法中并进行调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person) class1.newInstance();</span><br><span class="line">method1.invoke(person, personInfo.name(), personInfo.age(), personInfo.sex());</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ada <span class="number">20</span> female</span><br></pre></td></tr></table></figure>

<br/>

<p><code>@Target</code>：元注解，指定注解用于修饰类的哪个成员。</p>
<p>上文演示的代码中<code>@PersonInfo</code>注解是放在<code>show()</code>方法上的，由于我们未在定义注解添加<code>@Target</code>元注解，因此这个注解可以添加在任何地方。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PersonInfo &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">sex</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Target</code>有一个枚举数组ElementType类型的value属性，在赋值的时候需要使用大括号括起来。这个枚举数组中有不同的枚举常量，如上的元注解表示该注解只能放在方法和类上。</p>
<p>ElementType枚举类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ElementType</span> &#123;</span><br><span class="line">    <span class="comment">/** Class, interface (including annotation type), or enum declaration */</span></span><br><span class="line">    TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Field declaration (includes enum constants) */</span></span><br><span class="line">    FIELD,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Method declaration */</span></span><br><span class="line">    METHOD,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Formal parameter declaration */</span></span><br><span class="line">    PARAMETER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Constructor declaration */</span></span><br><span class="line">    CONSTRUCTOR,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Local variable declaration */</span></span><br><span class="line">    LOCAL_VARIABLE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Annotation type declaration */</span></span><br><span class="line">    ANNOTATION_TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Package declaration */</span></span><br><span class="line">    PACKAGE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Type parameter declaration</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TYPE_PARAMETER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Use of a type</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TYPE_USE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<p>end</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    Donate
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="Ssssv11 WeChat Pay">
        <span>WeChat Pay</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/JavaSE/" rel="tag"><i class="fa fa-tag"></i> JavaSE</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/04/29/GUI/" rel="prev" title="GUI">
                  <i class="fa fa-chevron-left"></i> GUI
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/29/Java8/" rel="next" title="Java8">
                  Java8 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ssssv</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script size="90" alpha="0.6" zIndex="-1" src="/js/ribbon/ribbon.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="/js/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>

<script src="/js/cursor/fireworks.js"></script>

